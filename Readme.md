# VideoConvertStreamServer

## ■はじめに
このソフトは、PC上にある動画ファイルを、ブラウザを通じてスマホやタブレットで見るために作った簡易HTTPサーバーです

## ■動作環境
・Windows 10 home 64bit バージョン 1903  
※64bit版OSでしか動作しません (同伴しているffmpengの都合上)

## ■導入方法

起動したら設定から "ポート番号"、"パスワード"、"ルートフォルダ"を設定してください

"ポート番号"を変更した場合は、プログラムの再起動が必要です

"ルートフォルダ"以下にある動画ファイルがサーバーで公開されます   
ルートフォルダは複数登録できないので、複数のドライブにまたがってフォルダを公開したい場合は、 
適当なルートフォルダにシンボリックリンクを置いてください

設定が終了したら、メインダイアログに書いてあるURLをクリックすれば既定のブラウザでローカルサイトが表示されるはずです

もし繋がらない場合は、ipconfigを実行してPCのIPアドレスを確認して  
http://(表示されたIPv4 アドレス):ポート番号/  
を代わりに開いてみてください

http://127.0.0.1:ポート番号/  
それか上のURLで繋がるはず…




## ■更新履歴


<pre>
Web
・htmlで使ってる各種ライブラリをローカル(/html/CDN/)にも置いた(現状使ってないが・・・)
・/root/でソート順が見つからない場合、デフォルト値を使用するようにした
・index.htmlでデフォルトソート順を追加するようにした
・/play/でエラー発生時、ダイアログではなくページ上にエラーメッセージを表示するようにした

Server
・ソートのデフォルト順を設定できるようにした
・PrepareHLSAPIでファイルが見つからない時、エラーメッセージを返すようにした
・PrepareHLSAPIでエンコード失敗時、エラーメッセージを返すようにした
・RawLoadAPIでファイルが見つからない時、404を返すようにした
・/CDN/以下アクセス時には認証を必要せずファイルを返すようにした
・リクエスト時、::SetThreadExecutionState(ES_SYSTEM_REQUIRED);を実行するようにした(PCがスリープしてしまうことへの対処)
・エンコードプロセスのコンソール表示をリリース版では表示しないようにした

</pre>